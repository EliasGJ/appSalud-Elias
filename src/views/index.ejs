<%- include('partials/head') %>

<div class="container my-5">
        <div class="row g-3 mb-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body d-flex align-items-center">
                        <div class="d-flex align-items-center">
                            <strong class="me-2"><%= message || 'Bienvenido a Odin, un aliado diseñado para ayudarte a cuidar tu bienestar cada día.' %></strong>
                            <div class="husky-wrap ms-1" aria-hidden="true">
                                <!-- Simple animated husky SVG -->
                                <svg class="husky" width="48" height="48" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img">
                                    <defs>
                                        <linearGradient id="g1" x1="0" x2="1">
                                            <stop offset="0%" stop-color="#e6f7ee"/>
                                            <stop offset="100%" stop-color="#c8f0dc"/>
                                        </linearGradient>
                                    </defs>
                                    <g fill="none" fill-rule="evenodd">
                                        <circle cx="32" cy="32" r="30" fill="url(#g1)" stroke="#0d6b4a" stroke-width="1"/>
                                        <g transform="translate(12,12)">
                                            <polygon points="6,2 0,18 12,10" fill="#ffffff" stroke="#0d6b4a" stroke-width="1"/>
                                            <polygon points="44,2 56,18 44,10" fill="#ffffff" stroke="#0d6b4a" stroke-width="1"/>
                                            <path d="M8 28 C16 40, 40 40, 48 28" fill="#ffffff" stroke="#0d6b4a"/>
                                            <circle cx="22" cy="24" r="3" fill="#0d6b4a"/>
                                            <circle cx="34" cy="24" r="3" fill="#0d6b4a"/>
                                            <circle cx="28" cy="32" r="2" fill="#0d6b4a"/>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <h1 class="h4 m-0">Lista de Pacientes</h1>
                        <span class="badge bg-secondary fs-6"><%= pacientes && pacientes.length ? pacientes.length : 0 %> pacientes</span>
                    </div>
                </div>
            </div>
        </div>

    <div class="row g-4">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Nombre</th>
                                    <th>Apellidos</th>
                                    <th>Fecha Nacimiento</th>
                                    <th class="text-end">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% if (pacientes && pacientes.length) { %>
                                    <% pacientes.forEach(function(paciente) { %>
                                        <tr class="border-top">
                                            <td class="fw-semibold"><%= paciente.nombre %></td>
                                            <td class="text-muted"><%= paciente.apellidos %></td>
                                            <td class="text-muted"><%= paciente.fechaDeNacimiento ? paciente.fechaDeNacimiento.toISOString().slice(0,10) : '' %></td>
                                            <td class="text-end">
                                                <a href="/paciente/<%= paciente.id %>" class="btn btn-sm btn-outline-primary me-1">Ver</a>
                                                <a href="/paciente/editar/<%= paciente.id %>" class="btn btn-sm btn-outline-warning me-1">Editar</a>
                                                <form action="/paciente/<%= paciente.id %>?_method=DELETE" method="POST" class="d-inline">
                                                    <button type="submit" class="btn btn-sm btn-outline-danger">Eliminar</button>
                                                </form>
                                            </td>
                                        </tr>
                                    <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="4" class="text-center py-4">No hay pacientes registrados.</td>
                                    </tr>
                                <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <aside class="col-lg-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h6 class="card-title">Agregar Nuevo Paciente</h6>
                    <p class="text-muted small">Rellena los datos básicos para registrar un paciente.</p>
                    <form action="/paciente" method="POST" class="row g-2">
                        <div class="col-12">
                            <label for="nombre" class="form-label small">Nombre</label>
                            <input type="text" class="form-control form-control-sm" id="nombre" name="nombre" required>
                        </div>
                        <div class="col-12">
                            <label for="apellidos" class="form-label small">Apellidos</label>
                            <input type="text" class="form-control form-control-sm" id="apellidos" name="apellidos" required>
                        </div>
                        <div class="col-12">
                            <label for="fechaDeNacimiento" class="form-label small">Fecha de Nacimiento</label>
                            <input type="date" class="form-control form-control-sm" id="fechaDeNacimiento" name="fechaDeNacimiento" required>
                        </div>
                        <div class="col-6">
                            <label for="peso" class="form-label small">Peso (kg)</label>
                            <input type="number" step="0.1" class="form-control form-control-sm" id="peso" name="peso">
                        </div>
                        <div class="col-6">
                            <label for="altura" class="form-label small">Altura (m)</label>
                            <input type="number" step="0.01" class="form-control form-control-sm" id="altura" name="altura">
                        </div>
                        <div class="col-12">
                            <label for="temperatura" class="form-label small">Temperatura (°C)</label>
                            <input type="number" step="0.1" class="form-control form-control-sm" id="temperatura" name="temperatura">
                        </div>
                        <div class="col-12 text-end">
                            <button type="submit" class="btn btn-sm btn-primary">Agregar</button>
                        </div>
                    </form>
                </div>
            </div>
        </aside>
    </div>

</div>

<%- include('partials/footer') %>